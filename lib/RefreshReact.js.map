{"version":3,"sources":["../src/RefreshReact.js"],"names":["RefreshReact","React","createRef","props","onRefresh","refresh","endSuccess","container","current","direction","callback","init","resetScroll","prevProps","disable","refreshInit","destory","lock","lockScroll","className","indicator","cls","children","up","Component","loading"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;IAEMA,Y;;;;;;;;;;;;;;;;;;kIAWQC,eAAMC,SAAN,E;kIAEA,YAAM;AAChB,YAAKC,KAAL,CAAWC,SAAX;;AACA,YAAKC,OAAL,CAAaC,UAAb;AACD,K;oIAEa,YAAM;AAClB,YAAKD,OAAL,GAAe,sBAAQ,MAAKE,SAAL,CAAeC,OAAvB,EAAgC;AAC7CC,QAAAA,SAAS,EAAE,IADkC;AAE7CC,QAAAA,QAAQ,EAAE,MAAKN;AAF8B,OAAhC,CAAf;;AAIA,YAAKC,OAAL,CAAaM,IAAb;AACD,K;oIAwBa,YAAM;AAClB,YAAKN,OAAL,CAAaO,WAAb;AACD,K;;;;;;uCAxBkBC,S,EAAW;AAC5B,UAAI,KAAKV,KAAL,CAAWW,OAAX,KAAuBD,SAAS,CAACC,OAArC,EAA8C;AAC5C,YAAI,CAAC,KAAKX,KAAL,CAAWW,OAAhB,EAAyB;AACvB,eAAKC,WAAL;AACD,SAFD,MAEO;AACL,eAAKV,OAAL,CAAaW,OAAb;AACD;AACF;;AACD,UAAI,KAAKb,KAAL,CAAWc,IAAX,KAAoBJ,SAAS,CAACI,IAAlC,EAAwC;AACtC,aAAKZ,OAAL,CAAaa,UAAb,CAAwB,KAAKf,KAAL,CAAWc,IAAnC;AACD;AACF;;;wCAEmB;AAClB,UAAI,CAAC,KAAKd,KAAL,CAAWW,OAAhB,EAAyB;AACvB,aAAKC,WAAL;AACD;AACF;;;2CACsB;AACrB,WAAKV,OAAL,CAAaW,OAAb;AACD;;;6BAKQ;AAAA,wBAC0B,KAAKb,KAD/B;AAAA,UACCgB,SADD,eACCA,SADD;AAAA,UACYC,SADZ,eACYA,SADZ;AAEP,UAAMC,GAAG,GAAG,yBAAWF,SAAX,EAAsB,eAAtB,CAAZ;AACA,aACE;AAAK,QAAA,SAAS,EAAEA,SAAhB;AAA2B,QAAA,GAAG,EAAE,KAAKZ;AAArC,SACG,KAAKJ,KAAL,CAAWmB,QADd,EAEE;AAAK,QAAA,SAAS,EAAC;AAAf,SACE;AAAK,QAAA,SAAS,EAAC;AAAf,SACE;AAAK,QAAA,SAAS,EAAC;AAAf,SAA+BF,SAAS,CAACG,EAAzC,CADF,CADF,CAFF,CADF;AAUD;;;EAhEwBC,gB;;8BAArBxB,Y,kBACkB;AACpBI,EAAAA,SAAS,EAAE,qBAAM,CAAE,CADC;AAEpBqB,EAAAA,OAAO,EAAE,KAFW;AAGpBL,EAAAA,SAAS,EAAE;AACTG,IAAAA,EAAE,EAAE;AADK,GAHS;AAMpBT,EAAAA,OAAO,EAAE,KANW;AAOpBG,EAAAA,IAAI,EAAE;AAPc,C;eAkETjB,Y","sourcesContent":["import React, { Component } from 'react';\nimport Classnames from 'classnames';\nimport refresh from './refresh';\n\nclass RefreshReact extends Component {\n  static defaultProps = {\n    onRefresh: () => {},\n    loading: false,\n    indicator: {\n      up: '加载中...',\n    },\n    disable: false,\n    lock: false,\n  };\n  refresh;\n  container = React.createRef();\n\n  onRefresh = () => {\n    this.props.onRefresh();\n    this.refresh.endSuccess();\n  };\n\n  refreshInit = () => {\n    this.refresh = refresh(this.container.current, {\n      direction: 'up',\n      callback: this.onRefresh,\n    });\n    this.refresh.init();\n  };\n\n  componentDidUpdate(prevProps) {\n    if (this.props.disable !== prevProps.disable) {\n      if (!this.props.disable) {\n        this.refreshInit();\n      } else {\n        this.refresh.destory();\n      }\n    }\n    if (this.props.lock !== prevProps.lock) {\n      this.refresh.lockScroll(this.props.lock);\n    }\n  }\n\n  componentDidMount() {\n    if (!this.props.disable) {\n      this.refreshInit();\n    }\n  }\n  componentWillUnmount() {\n    this.refresh.destory();\n  }\n\n  resetScroll = () => {\n    this.refresh.resetScroll();\n  };\n  render() {\n    const { className, indicator } = this.props;\n    const cls = Classnames(className, 'godz-hardware');\n    return (\n      <div className={className} ref={this.container}>\n        {this.props.children}\n        <div className=\"godz-pr-up\">\n          <div className=\"godz-pr-box\">\n            <div className=\"godz-pr-text\">{indicator.up}</div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default RefreshReact;\n"],"file":"RefreshReact.js"}